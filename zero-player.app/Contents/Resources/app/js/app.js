for(var monoGrid=new Array(8),i=0,n=8;n>i;i++){monoGrid[i]=new Array(8);for(var j=0,m=8;m>j;j++)monoGrid[i][j]=0}var ping=new Tone.PingPongDelay(.16,.7).toMaster(),filter=new Tone.Filter(10,"lowpass").connect(ping),synth=new Tone.PolySynth(3,Tone.MonoSynth).connect(filter);synth.set({volume:-25,oscillator:{type:"square6"},filter:{Q:3,type:"allpass",rolloff:-24},envelope:{attack:.3,decay:0,sustain:1,release:.3},filterEnvelope:{attack:.2,decay:0,sustain:1,release:.2,min:20,max:20,exponent:2}}),nx.onload=function(){help(),nx.colorize("#2d2d2d"),nx.colorize("accent","#0099CC"),nx.colorize("fill","#2D2D2D"),nx.colorize("border","#ffffff"),matrix1.cellBuffer=8,matrix1.col=8,matrix1.row=8,matrix1.init(),setInterval(matrix1.life,80),matrix1.on("*",function(e){if(synth.set("detune",~~(20*Math.random()-1)),e.grid)for(var n=0;n<e.grid.length;n++)for(var o=0;o<e.grid[n].length;o++)1==e.grid[n][o]&&synth.triggerAttackRelease((o+1)*(n+1)*33,.22),e.grid[n][o]!=monoGrid[n][o]&&(1==e.grid[n][o]&&(matrix1.transmit(n,o),monoGrid[n][o]=1),0===e.grid[n][o]&&(monoGrid[n][o]=0,monoGrid[n][o]=0))}),matrix1.draw(),envelope1.on("*",function(e){e.amp&&(filter.frequency.value=2e3*e.amp)}),envelope1.val.points=[{x:0,y:0},{x:.2,y:.8},{x:.6,y:.6},{x:1,y:0}],envelope1.draw(),envelope1.looping=!0,envelope1.duration=8192,envelope1.start()};
